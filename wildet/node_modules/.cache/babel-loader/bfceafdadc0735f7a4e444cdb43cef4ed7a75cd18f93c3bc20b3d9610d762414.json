{"ast":null,"code":"import _toConsumableArray from\"/Users/minjeongyeom/Projects/project-wildet/wildet/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/minjeongyeom/Projects/project-wildet/wildet/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import React from\"react\";import{ref,uploadBytes,getDownloadURL,listAll,list}from\"firebase/storage\";import{storage}from\"../api/firebase\";import{v4}from\"uuid\";import styles from\"./css/Album.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Album(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),imageUpload=_useState2[0],setImageUpload=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),imageUrls=_useState4[0],setImageUrls=_useState4[1];var imagesListRef=ref(storage,\"images/\");var uploadFile=function uploadFile(){if(imageUpload==null)return;var imageRef=ref(storage,\"images/\".concat(imageUpload.name+v4()));uploadBytes(imageRef,imageUpload).then(function(snapshot){getDownloadURL(snapshot.ref).then(function(url){setImageUrls(function(prev){return[].concat(_toConsumableArray(prev),[url]);});});});};useEffect(function(){listAll(imagesListRef).then(function(response){response.items.forEach(function(item){getDownloadURL(item).then(function(url){setImageUrls(function(prev){return[].concat(_toConsumableArray(prev),[url]);});});});});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:styles.album,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(event){setImageUpload(event.target.files[0]);}}),/*#__PURE__*/_jsx(\"button\",{onClick:uploadFile,children:\" Upload Image\"}),imageUrls.map(function(url){return/*#__PURE__*/_jsx(\"img\",{src:url});})]});}export default Album;","map":{"version":3,"names":["useState","useEffect","React","ref","uploadBytes","getDownloadURL","listAll","list","storage","v4","styles","jsx","_jsx","jsxs","_jsxs","Album","_useState","_useState2","_slicedToArray","imageUpload","setImageUpload","_useState3","_useState4","imageUrls","setImageUrls","imagesListRef","uploadFile","imageRef","concat","name","then","snapshot","url","prev","_toConsumableArray","response","items","forEach","item","className","album","children","type","onChange","event","target","files","onClick","map","src"],"sources":["/Users/minjeongyeom/Projects/project-wildet/wildet/src/components/Album.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport React from \"react\";\nimport {\n  ref,\n  uploadBytes,\n  getDownloadURL,\n  listAll,\n  list,\n} from \"firebase/storage\";\nimport { storage } from \"../api/firebase\";\nimport { v4 } from \"uuid\";\nimport styles from \"./css/Album.module.css\";\nfunction Album() {\n  const [imageUpload, setImageUpload] = useState(null);\n  const [imageUrls, setImageUrls] = useState([]);\n\n  const imagesListRef = ref(storage, \"images/\");\n  const uploadFile = () => {\n    if (imageUpload == null) return;\n    const imageRef = ref(storage, `images/${imageUpload.name + v4()}`);\n    uploadBytes(imageRef, imageUpload).then((snapshot) => {\n      getDownloadURL(snapshot.ref).then((url) => {\n        setImageUrls((prev) => [...prev, url]);\n      });\n    });\n  };\n\n  useEffect(() => {\n    listAll(imagesListRef).then((response) => {\n      response.items.forEach((item) => {\n        getDownloadURL(item).then((url) => {\n          setImageUrls((prev) => [...prev, url]);\n        });\n      });\n    });\n  }, []);\n\n  return (\n    <div className={styles.album}>\n      <input\n        type=\"file\"\n        onChange={(event) => {\n          setImageUpload(event.target.files[0]);\n        }}\n      />\n      <button onClick={uploadFile}> Upload Image</button>\n      {imageUrls.map((url) => {\n        return <img src={url} />;\n      })}\n    </div>\n  );\n}\n\nexport default Album;\n"],"mappings":"wRAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OACEC,GAAG,CACHC,WAAW,CACXC,cAAc,CACdC,OAAO,CACPC,IAAI,KACC,kBAAkB,CACzB,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,EAAE,KAAQ,MAAM,CACzB,MAAO,CAAAC,MAAM,KAAM,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAC5C,QAAS,CAAAC,KAAKA,CAAA,CAAG,CACf,IAAAC,SAAA,CAAsChB,QAAQ,CAAC,IAAI,CAAC,CAAAiB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7CG,WAAW,CAAAF,UAAA,IAAEG,cAAc,CAAAH,UAAA,IAClC,IAAAI,UAAA,CAAkCrB,QAAQ,CAAC,EAAE,CAAC,CAAAsB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAvCE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAE9B,GAAM,CAAAG,aAAa,CAAGtB,GAAG,CAACK,OAAO,CAAE,SAAS,CAAC,CAC7C,GAAM,CAAAkB,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,CAAS,CACvB,GAAIP,WAAW,EAAI,IAAI,CAAE,OACzB,GAAM,CAAAQ,QAAQ,CAAGxB,GAAG,CAACK,OAAO,WAAAoB,MAAA,CAAYT,WAAW,CAACU,IAAI,CAAGpB,EAAE,EAAE,EAAG,CAClEL,WAAW,CAACuB,QAAQ,CAAER,WAAW,CAAC,CAACW,IAAI,CAAC,SAACC,QAAQ,CAAK,CACpD1B,cAAc,CAAC0B,QAAQ,CAAC5B,GAAG,CAAC,CAAC2B,IAAI,CAAC,SAACE,GAAG,CAAK,CACzCR,YAAY,CAAC,SAACS,IAAI,WAAAL,MAAA,CAAAM,kBAAA,CAASD,IAAI,GAAED,GAAG,IAAC,CAAC,CACxC,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAAC,CAED/B,SAAS,CAAC,UAAM,CACdK,OAAO,CAACmB,aAAa,CAAC,CAACK,IAAI,CAAC,SAACK,QAAQ,CAAK,CACxCA,QAAQ,CAACC,KAAK,CAACC,OAAO,CAAC,SAACC,IAAI,CAAK,CAC/BjC,cAAc,CAACiC,IAAI,CAAC,CAACR,IAAI,CAAC,SAACE,GAAG,CAAK,CACjCR,YAAY,CAAC,SAACS,IAAI,WAAAL,MAAA,CAAAM,kBAAA,CAASD,IAAI,GAAED,GAAG,IAAC,CAAC,CACxC,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,mBACElB,KAAA,QAAKyB,SAAS,CAAE7B,MAAM,CAAC8B,KAAM,CAAAC,QAAA,eAC3B7B,IAAA,UACE8B,IAAI,CAAC,MAAM,CACXC,QAAQ,CAAE,SAAAA,SAACC,KAAK,CAAK,CACnBxB,cAAc,CAACwB,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CACvC,CAAE,EACF,cACFlC,IAAA,WAAQmC,OAAO,CAAErB,UAAW,CAAAe,QAAA,CAAC,eAAa,EAAS,CAClDlB,SAAS,CAACyB,GAAG,CAAC,SAAChB,GAAG,CAAK,CACtB,mBAAOpB,IAAA,QAAKqC,GAAG,CAAEjB,GAAI,EAAG,CAC1B,CAAC,CAAC,GACE,CAEV,CAEA,cAAe,CAAAjB,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}